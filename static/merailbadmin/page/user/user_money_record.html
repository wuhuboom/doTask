<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>用户列表</title>
    <link rel="stylesheet" href="../../assets/libs/layui/css/layui.css"/>
    <link rel="stylesheet" href="../../assets/module/admin.css?v=318"/>
    <script src="../../assets/js/moment.js"></script>

    <style>

        .currSerachBtn {
            box-shadow: 0 15px 18px -6px rgb(45 140 240 / 65%) !important;
        }

        .currReloadBtn {
            box-shadow: 0 15px 18px -6px rgb(146 109 222 / 65%) !important;
        }

        .layui-table-cell {
            height: 46px;
            line-height: 46px;
        }

    </style>


    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<!-- 正文开始 -->
<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-card-body">

            <!-- 数据表格 -->
            <table id="userTable" lay-filter="userTable" style="margin-top:10px"></table>
        </div>
    </div>
</div>


<!-- js部分 -->
<script type="text/javascript" src="../../assets/libs/layui/layui.js"></script>
<script type="text/javascript" src="../../assets/js/common.js?v=318"></script>

<script type="text/javascript" src="../../assets/js/jquery.min.js"></script>
<script type="text/javascript" src="../../assets/js/jquery.cookie.min.js"></script>
<script type="text/javascript" src="../../assets/js/config.url.js"></script>

<!--数据表格操作工具栏-->
<script type="text/html" id="orderListBar">
    <!--    <a class="layui-btn layui-btn-normal layui-btn-radius" lay-event="rechargebtn" ><i class="layui-icon layui-icon-rmb"></i>充值</a>-->
    <!--    <a class="layui-btn layui-btn-normal layui-btn-radius " lay-event="infobtn" style="background-color: #fff;color: #0C0C0C;border: 1px solid #C9C9C9;"><i class="layui-icon">&#xe615;</i>详情</a>-->
    <!--    <a class="layui-btn layui-btn-normal layui-btn-radius " lay-event="changebtn" style="background-color: #009688"><i class="layui-icon layui-icon-edit"></i>修改余额</a>-->
    <!--    <a class="layui-btn layui-btn-xs layui-btn-danger" lay-event="delbtn"><i class="layui-icon">&#x1006;</i>删除</a>-->
</script>
<script>

    var mybck = $.cookie('tokenMyb');
    //alert(document.cookie);
    //console.log(mybck)
    if (mybck == "" || mybck == null) {

        window.top.location.href = "../../login.html";

    } else {

        var currParentDatas = eval('(' + parent.jsondata + ')')
        var player_idS = currParentDatas.ID

        layui.use(['layer', 'form', 'table', 'util', 'admin', 'xmSelect', 'notice'], function () {
            var $ = layui.jquery;
            var layer = layui.layer;
            var form = layui.form;
            var table = layui.table;
            var util = layui.util;
            var admin = layui.admin;
            var xmSelect = layui.xmSelect;
            var notice = layui.notice;


            var log_login_request_param = {};
            log_login_request_param['operation'] = 'changeMoney';
            log_login_request_param['user_id'] = player_idS


            /* 渲染表格 */
            var insTb = table.render({
                elem: '#userTable',
                url: global_requestAddress + global_requestAddress_js_user + "?action=select",
                method: 'post',
                headers: {
                    "token": mybck,
                },
                response: {
                    statusCode: 2000,
                    dataName: 'result',
                },
                where: log_login_request_param,
                cellMinWidth: 100,
                page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
                    layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
                    //,curr: 5 //设定初始在第 5 页
                    , groups: 10 //只显示 1 个连续页码
                    , first: "首页" //不显示首页
                    , last: "尾页"//不显示尾页
                },
                height: "full-100",
                limit: 15,
                limits: [15, 30, 50, 100],
                // id : "systemLog",
                cols: [[
                    {type: 'checkbox'},
                    {field: 'ID', title: 'ID', sort: true, align: "center"},
                    // {field: 'play_kinds_id', title: '玩法总类', sort: true,align:"center"},
                    // {field: 'periods_num', title: '期数', sort: true,align:"center"},
                    {field: 'Money', title: '账变金额', sort: true, align: "center"},
                    {field: 'OriginalMoney', title: '初始金额', sort: true, align: "center"},
                    {field: 'NowMoney', title: '账变后金额', sort: true, align: "center"},
                    {
                        field: 'Kinds', title: '类型', sort: true, align: "center", templet: function (d) {
                            var kindstrs = "";

                            if (d.Kinds == "1") {//充值

                                kindstrs = '<button class="layui-btn  layui-btn-xs" style="background-color: #008B8B;border-color: #008B8B;">' + '充值' + '</button>'

                                return kindstrs;

                            } else if (d.Kinds == "2") {//押注


                                kindstrs = '<button class="layui-btn  layui-btn-xs" style="background-color: #00CED1;border-color: #00CED1;">' + '押注' + '</button>'

                                return kindstrs;

                            } else if (d.Kinds == "3") {//任务佣金
                                kindstrs = '<button class="layui-btn  layui-btn-xs" style="background-color: #FF00FF;border-color: #FF00FF;">' + '任务佣金' + '</button>'

                                return kindstrs;

                            } else if (d.Kinds == "4") {//任务冻结

                                kindstrs = '<button class="layui-btn  layui-btn-xs" style="background-color: #8B4513;border-color: #8B4513;">' + '任务冻结' + '</button>'

                                return kindstrs;

                            } else if (d.Kinds == "5") {//任务解冻

                                kindstrs = '<button class="layui-btn  layui-btn-xs" style="background-color: #808000;border-color: #808000;">' + '任务解冻' + '</button>'


                                return kindstrs;

                            } else if (d.Kinds == "6") {//盈利金额(本金+盈利)

                                kindstrs = '<button class="layui-btn  layui-btn-xs" style="background-color: #3CB371;border-color: #3CB371;">' + '盈利金额(本金+盈利)' + '</button>'


                                return kindstrs;

                            } else if (d.Kinds == "7") {//提现驳回

                                kindstrs = '<button class="layui-btn  layui-btn-xs" style="background-color: #9400D3;border-color: #9400D3;">' + '提现驳回' + '</button>'


                                return kindstrs;

                            } else if (d.Kinds == "8") {//取消投注

                                kindstrs = '<button class="layui-btn  layui-btn-xs" style="background-color: #DC143C;border-color: #DC143C;">' + '取消投注' + '</button>'


                                return kindstrs;

                            } else if (d.Kinds == "9") {//修改错误结果

                                kindstrs = '<button class="layui-btn  layui-btn-xs" style="background-color: #5F9EA0;border-color: #5F9EA0;">' + '修改错误结果' + '</button>'


                                return kindstrs;

                            } else if (d.Kinds == "10") {//本期无效

                                kindstrs = '<button class="layui-btn  layui-btn-xs" style="background-color: #6A5ACD;border-color: #6A5ACD;">' + '本期无效' + '</button>'


                                return kindstrs;

                            } else if (d.Kinds == "11") {//下分

                                kindstrs = '<button class="layui-btn  layui-btn-xs" style="background-color: #9dcd5a;border-color: #9dcd5a;">' + '下分' + '</button>'


                                return kindstrs;

                            } else {
                                return '--'
                            }


                        }
                    },
                    {
                        field: 'TaskOrderId', title: '账变数据ID', sort: true, align: "center", templet: function (d) {
                            if (d.TaskOrderId) {
                                return d.TaskOrderId
                            } else {
                                return ""
                            }

                        }
                    },
                    {
                        field: 'Created',
                        title: '创建时间',
                        align: "center",
                        width: 180,
                        sort: true,
                        templet: function (d) {
                            // return util.toDateString(d.Created * 1000);
                            return moment(d.Created * 1000).utc().utcOffset(currTimeZoneValue).format('YYYY-MM-DD HH:mm:ss');
                        }
                    },
                ]],
                done: function (res, curr, count) {
                    $('tr').css({'background-color': '#fff', 'color': '#191a1c'});
                }
            });


        });

    }


</script>
</body>
</html>
